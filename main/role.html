<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Dashboard</title>
		<script src="../dashboard/require.js"></script>
		<script src="../dashboard/config.js"></script>
		<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/main.css" />
		<link rel="stylesheet" type="text/css" href="../css/jqtree.css"/>
		<style type="text/css">
		.box .box-div{float: left;height: 34px;border-radius: 4px;border:1px solid #ccc;margin-right: 10px;}
		.box .box-div .data{display: inline-block;border-right: 1px solid #ccc;padding:6px 4px;}
		.box .box-div .delete{padding:3px 4px;display:inline-block;font-style: normal;cursor: pointer;width:16px;height: 26px;}
		.box .box-div .delete:hover{background:#eee;}
		</style>
		<script>
			require(['const/Auth','const/Logout'],function(Auth){
				Auth.loadAuthLink();
			});
		</script>
	</head>
	<body>
		<div class="container header">
			<header>
				<h1>
					<a href="index.html">Dashboard</a>
					<a href="javascript:;">|</a>
					<a href="index.html#service">服务</a>
				</h1>
				<div class="right" id="top">
					<a href="javascript:;" id="logout">退出</a>
				</div>
			</header>
		</div>
		<div class="container body">
			<div class="left form-inline" style="">
				<ul class="nav nav-pills nav-stacked">
					<li><a href="auth.html">权限Auth</a></li>
					<li class="active"><a href="role.html">用户组管理</a></li>
					<li><a href="user.html">用户管理</a></li>
				</ul>
			</div>
			<div class="right" id="right">
				<div id="body">
					<div class="panel panel-default">
						<div class="panel-body">
							<div class="form-group">
								<input type="button" class="btn btn-primary" data-toggle="modal" data-target="#createRole" value="新建用户组" />
							</div>
						</div>
						<table class="table table-hover table-condensed">
							<thead>
								<tr>
									<th>id</th>
									<th>name</th>
									<th>Auth Num</th>
									<th>User Num</th>
									<th>&nbsp;</th>
								</tr>
							</thead>
							<tbody>
								
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="createRole" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">新建用户组</h4>
					</div>
					<div class="modal-body">
						<div class="form-group form-inline">
							<label for="groupName">GroupName：</label>
							<input type="text" class="form-control" id="groupName" />
						</div>
						<div class="form-group">
							<label for="">AuthList：</label>
						</div>
						<div class="form-group form-inline" id="authList">
							<table class="table">
								
							</table>
						</div>
						<div class="form-group form-inline">
							<label for="">增加用户：</label>
							<input type="text" class="form-control" id="userName" />
							<input type="button" class="btn btn-danger" id="addUser" value="增加" />
						</div>
						<div class="form-group form-inline clearfix box" id="userListBox">
							
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button type="button" class="btn btn-primary" id="saveRole">添加</button>
					</div>
				</div>
			</div>
		</div>
		<div class="modal fade" id="showRole" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">查看/更新用户组</h4>
					</div>
					<div class="modal-body">
						
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button type="button" class="btn btn-primary" id="updateRole">更新</button>
					</div>
				</div>
			</div>
		</div>
		<script type="text/template" id="showRoleBody">
			<div class="form-group form-inline">
				<label for="groupName">GroupName：</label>
				<span>{{rolename}}</span>
			</div>
			<div class="form-group">
				<label for="">AuthList：</label>
			</div>
			<div class="form-group form-inline" id="showRoleAuthList">
				<table class="table">
					
				</table>
			</div>
			<div class="form-group form-inline">
				<label for="">增加用户：</label>
				<input type="text" class="form-control" id="newUserName" />
				<input type="button" class="btn btn-danger" id="addNewUser" value="增加" />
			</div>
			<div class="form-group form-inline clearfix box" id="newUserListBox">
				
			</div>
		</script>
		<script type="text/template" id="userBox">
			<div class="box-div">
				<span class="data">{{username}}</span>
				<i index="{{index}}" class="delete deleteUser">x</i>
			</div>
		</script>
		<script type="text/template" id="roleTable">
		{{each role}}
			<tr>
				<td>{{$value.id}}</td>
				<td>{{$value.rolename}}</td>
				<td>{{$value.authlist.length}}</td>
				<td>{{$value.userlist.length}}</td>
				<td>
					<input type="button" class="btn btn-default showRole" data-id="{{$value.id}}"  data-toggle="modal" data-target="#showRole" value="查看" />
					<input type="button" class="btn btn-danger deleteRole" data-id="{{$value.id}}" value="删除" />
				</td>
			</tr>
		{{/each}}
		</script>
		<script>
			require(['controller/Role','bootstrap'],function(Role){
				new Role();
			});
		</script>
	</body>
</html>